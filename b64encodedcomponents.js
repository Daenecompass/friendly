//encoded version of mithril min
var mithrilmin = "LyoNCk1pdGhyaWwgdjAuMi4wDQpodHRwOi8vZ2l0aHViLmNvbS9saG9yaWUvbWl0aHJpbC5qcw0KKGMpIExlbyBIb3JpZQ0KTGljZW5zZTogTUlUDQoqLw0KdmFyIG09ZnVuY3Rpb24gYShiLGMpe2Z1bmN0aW9uIGQoYSl7RD1hLmRvY3VtZW50LEU9YS5sb2NhdGlvbixHPWEuY2FuY2VsQW5pbWF0aW9uRnJhbWV8fGEuY2xlYXJUaW1lb3V0LEY9YS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGEuc2V0VGltZW91dH1mdW5jdGlvbiBlKCl7dmFyIGEsYj1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cyksYz0hKG51bGw9PWJbMV18fEwuY2FsbChiWzFdKSE9PUh8fCJ0YWciaW4gYlsxXXx8InZpZXciaW4gYlsxXXx8InN1YnRyZWUiaW4gYlsxXSksZD1jP2JbMV06e30sZT0iY2xhc3MiaW4gZD8iY2xhc3MiOiJjbGFzc05hbWUiLGY9e3RhZzoiZGl2IixhdHRyczp7fX0sZz1bXTtpZihMLmNhbGwoYlswXSkhPUopdGhyb3cgbmV3IEVycm9yKCJzZWxlY3RvciBpbiBtKHNlbGVjdG9yLCBhdHRycywgY2hpbGRyZW4pIHNob3VsZCBiZSBhIHN0cmluZyIpO2Zvcig7YT1NLmV4ZWMoYlswXSk7KWlmKCIiPT09YVsxXSYmYVsyXSlmLnRhZz1hWzJdO2Vsc2UgaWYoIiMiPT09YVsxXSlmLmF0dHJzLmlkPWFbMl07ZWxzZSBpZigiLiI9PT1hWzFdKWcucHVzaChhWzJdKTtlbHNlIGlmKCJbIj09PWFbM11bMF0pe3ZhciBoPU4uZXhlYyhhWzNdKTtmLmF0dHJzW2hbMV1dPWhbM118fChoWzJdPyIiOiEwKX12YXIgaT1iLnNsaWNlKGM/MjoxKTtmLmNoaWxkcmVuPTE9PT1pLmxlbmd0aCYmTC5jYWxsKGlbMF0pPT09ST9pWzBdOmk7Zm9yKHZhciBqIGluIGQpZC5oYXNPd25Qcm9wZXJ0eShqKSYmKGo9PT1lJiZudWxsIT1kW2pdJiYiIiE9PWRbal0/KGcucHVzaChkW2pdKSxmLmF0dHJzW2pdPSIiKTpmLmF0dHJzW2pdPWRbal0pO3JldHVybiBnLmxlbmd0aD4wJiYoZi5hdHRyc1tlXT1nLmpvaW4oIiAiKSksZn1mdW5jdGlvbiBmKGEsYixkLGosbCxtLG4sbyxwLHEscil7dHJ5eyhudWxsPT1sfHxudWxsPT1sLnRvU3RyaW5nKCkpJiYobD0iIil9Y2F0Y2gocyl7bD0iIn1pZigicmV0YWluIj09PWwuc3VidHJlZSlyZXR1cm4gbTt2YXIgdD1MLmNhbGwobSksdT1MLmNhbGwobCk7aWYobnVsbD09bXx8dCE9PXUpe2lmKG51bGwhPW0paWYoZCYmZC5ub2Rlcyl7dmFyIHY9by1qLHc9disodT09PUk/bDptLm5vZGVzKS5sZW5ndGg7aShkLm5vZGVzLnNsaWNlKHYsdyksZC5zbGljZSh2LHcpKX1lbHNlIG0ubm9kZXMmJmkobS5ub2RlcyxtKTttPW5ldyBsLmNvbnN0cnVjdG9yLG0udGFnJiYobT17fSksbS5ub2Rlcz1bXX1pZih1PT09SSl7Zm9yKHZhciB4PTAseT1sLmxlbmd0aDt5Png7eCsrKUwuY2FsbChsW3hdKT09PUkmJihsPWwuY29uY2F0LmFwcGx5KFtdLGwpLHgtLSx5PWwubGVuZ3RoKTtmb3IodmFyIHo9W10sQT1tLmxlbmd0aD09PWwubGVuZ3RoLEI9MCxDPTEsRT0yLEY9MyxHPXt9LE09ITEseD0wO3g8bS5sZW5ndGg7eCsrKW1beF0mJm1beF0uYXR0cnMmJm51bGwhPW1beF0uYXR0cnMua2V5JiYoTT0hMCxHW21beF0uYXR0cnMua2V5XT17YWN0aW9uOkMsaW5kZXg6eH0pO2Zvcih2YXIgTj0wLHg9MCx5PWwubGVuZ3RoO3k+eDt4KyspaWYobFt4XSYmbFt4XS5hdHRycyYmbnVsbCE9bFt4XS5hdHRycy5rZXkpe2Zvcih2YXIgUT0wLHk9bC5sZW5ndGg7eT5RO1ErKylsW1FdJiZsW1FdLmF0dHJzJiZudWxsPT1sW1FdLmF0dHJzLmtleSYmKGxbUV0uYXR0cnMua2V5PSJfX21pdGhyaWxfXyIrTisrKTticmVha31pZihNKXt2YXIgUj0hMTtpZihsLmxlbmd0aCE9bS5sZW5ndGgpUj0hMDtlbHNlIGZvcih2YXIgUyxULHg9MDtTPW1beF0sVD1sW3hdO3grKylpZihTLmF0dHJzJiZULmF0dHJzJiZTLmF0dHJzLmtleSE9VC5hdHRycy5rZXkpe1I9ITA7YnJlYWt9aWYoUil7Zm9yKHZhciB4PTAseT1sLmxlbmd0aDt5Png7eCsrKWlmKGxbeF0mJmxbeF0uYXR0cnMmJm51bGwhPWxbeF0uYXR0cnMua2V5KXt2YXIgVT1sW3hdLmF0dHJzLmtleTtHW1VdPUdbVV0/e2FjdGlvbjpGLGluZGV4OngsZnJvbTpHW1VdLmluZGV4LGVsZW1lbnQ6bS5ub2Rlc1tHW1VdLmluZGV4XXx8RC5jcmVhdGVFbGVtZW50KCJkaXYiKX06e2FjdGlvbjpFLGluZGV4Onh9fXZhciBWPVtdO2Zvcih2YXIgVyBpbiBHKVYucHVzaChHW1ddKTt2YXIgWD1WLnNvcnQoZyksWT1uZXcgQXJyYXkobS5sZW5ndGgpO1kubm9kZXM9bS5ub2Rlcy5zbGljZSgpO2Zvcih2YXIgWix4PTA7Wj1YW3hdO3grKyl7aWYoWi5hY3Rpb249PT1DJiYoaShtW1ouaW5kZXhdLm5vZGVzLG1bWi5pbmRleF0pLFkuc3BsaWNlKFouaW5kZXgsMSkpLFouYWN0aW9uPT09RSl7dmFyICQ9RC5jcmVhdGVFbGVtZW50KCJkaXYiKTskLmtleT1sW1ouaW5kZXhdLmF0dHJzLmtleSxhLmluc2VydEJlZm9yZSgkLGEuY2hpbGROb2Rlc1taLmluZGV4XXx8bnVsbCksWS5zcGxpY2UoWi5pbmRleCwwLHthdHRyczp7a2V5OmxbWi5pbmRleF0uYXR0cnMua2V5fSxub2RlczpbJF19KSxZLm5vZGVzW1ouaW5kZXhdPSR9Wi5hY3Rpb249PT1GJiYoYS5jaGlsZE5vZGVzW1ouaW5kZXhdIT09Wi5lbGVtZW50JiZudWxsIT09Wi5lbGVtZW50JiZhLmluc2VydEJlZm9yZShaLmVsZW1lbnQsYS5jaGlsZE5vZGVzW1ouaW5kZXhdfHxudWxsKSxZW1ouaW5kZXhdPW1bWi5mcm9tXSxZLm5vZGVzW1ouaW5kZXhdPVouZWxlbWVudCl9bT1ZfX1mb3IodmFyIHg9MCxfPTAseT1sLmxlbmd0aDt5Png7eCsrKXt2YXIgYmI9ZihhLGIsbSxvLGxbeF0sbVtfXSxuLG8rQnx8QixwLHEscik7YmIhPT1jJiYoYmIubm9kZXMuaW50YWN0fHwoQT0hMSksQis9YmIuJHRydXN0ZWQ/KGJiLm1hdGNoKC88W15cL118XD5ccypbXjxdL2cpfHxbMF0pLmxlbmd0aDpMLmNhbGwoYmIpPT09ST9iYi5sZW5ndGg6MSxtW18rK109YmIpfWlmKCFBKXtmb3IodmFyIHg9MCx5PWwubGVuZ3RoO3k+eDt4KyspbnVsbCE9bVt4XSYmei5wdXNoLmFwcGx5KHosbVt4XS5ub2Rlcyk7Zm9yKHZhciBjYix4PTA7Y2I9bS5ub2Rlc1t4XTt4KyspbnVsbCE9Y2IucGFyZW50Tm9kZSYmei5pbmRleE9mKGNiKTwwJiZpKFtjYl0sW21beF1dKTtsLmxlbmd0aDxtLmxlbmd0aCYmKG0ubGVuZ3RoPWwubGVuZ3RoKSxtLm5vZGVzPXp9fWVsc2UgaWYobnVsbCE9bCYmdT09PUgpe2Zvcih2YXIgZWI9W10sZmI9W107bC52aWV3Oyl7dmFyIGdiPWwudmlldy4kb3JpZ2luYWx8fGwudmlldyxoYj0iZGlmZiI9PWUucmVkcmF3LnN0cmF0ZWd5KCkmJm0udmlld3M/bS52aWV3cy5pbmRleE9mKGdiKTotMSxpYj1oYj4tMT9tLmNvbnRyb2xsZXJzW2hiXTpuZXcobC5jb250cm9sbGVyfHxQKSxVPWwmJmwuYXR0cnMmJmwuYXR0cnMua2V5O2lmKGw9MD09ZGJ8fG0mJm0uY29udHJvbGxlcnMmJm0uY29udHJvbGxlcnMuaW5kZXhPZihpYik+LTE/bC52aWV3KGliKTp7dGFnOiJwbGFjZWhvbGRlciJ9LCJyZXRhaW4iPT09bC5zdWJ0cmVlKXJldHVybiBtO1UmJihsLmF0dHJzfHwobC5hdHRycz17fSksbC5hdHRycy5rZXk9VSksaWIub251bmxvYWQmJmFiLnB1c2goe2NvbnRyb2xsZXI6aWIsaGFuZGxlcjppYi5vbnVubG9hZH0pLGViLnB1c2goZ2IpLGZiLnB1c2goaWIpfWlmKCFsLnRhZyYmZmIubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiQ29tcG9uZW50IHRlbXBsYXRlIG11c3QgcmV0dXJuIGEgdmlydHVhbCBlbGVtZW50LCBub3QgYW4gYXJyYXksIHN0cmluZywgZXRjLiIpO2wuYXR0cnN8fChsLmF0dHJzPXt9KSxtLmF0dHJzfHwobS5hdHRycz17fSk7dmFyIGpiPU9iamVjdC5rZXlzKGwuYXR0cnMpLGtiPWpiLmxlbmd0aD4oImtleSJpbiBsLmF0dHJzPzE6MCk7aWYoKGwudGFnIT1tLnRhZ3x8amIuc29ydCgpLmpvaW4oKSE9T2JqZWN0LmtleXMobS5hdHRycykuc29ydCgpLmpvaW4oKXx8bC5hdHRycy5pZCE9bS5hdHRycy5pZHx8bC5hdHRycy5rZXkhPW0uYXR0cnMua2V5fHwiYWxsIj09ZS5yZWRyYXcuc3RyYXRlZ3koKSYmKCFtLmNvbmZpZ0NvbnRleHR8fG0uY29uZmlnQ29udGV4dC5yZXRhaW4hPT0hMCl8fCJkaWZmIj09ZS5yZWRyYXcuc3RyYXRlZ3koKSYmbS5jb25maWdDb250ZXh0JiZtLmNvbmZpZ0NvbnRleHQucmV0YWluPT09ITEpJiYobS5ub2Rlcy5sZW5ndGgmJmkobS5ub2RlcyksbS5jb25maWdDb250ZXh0JiZ0eXBlb2YgbS5jb25maWdDb250ZXh0Lm9udW5sb2FkPT09SyYmbS5jb25maWdDb250ZXh0Lm9udW5sb2FkKCksbS5jb250cm9sbGVycykpZm9yKHZhciBpYix4PTA7aWI9bS5jb250cm9sbGVyc1t4XTt4KyspdHlwZW9mIGliLm9udW5sb2FkPT09SyYmaWIub251bmxvYWQoe3ByZXZlbnREZWZhdWx0OlB9KTtpZihMLmNhbGwobC50YWcpIT1KKXJldHVybjt2YXIgY2IsbGI9MD09PW0ubm9kZXMubGVuZ3RoO2lmKGwuYXR0cnMueG1sbnM/cT1sLmF0dHJzLnhtbG5zOiJzdmciPT09bC50YWc/cT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciOiJtYXRoIj09PWwudGFnJiYocT0iaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTCIpLGxiKXtpZihjYj1sLmF0dHJzLmlzP3E9PT1jP0QuY3JlYXRlRWxlbWVudChsLnRhZyxsLmF0dHJzLmlzKTpELmNyZWF0ZUVsZW1lbnROUyhxLGwudGFnLGwuYXR0cnMuaXMpOnE9PT1jP0QuY3JlYXRlRWxlbWVudChsLnRhZyk6RC5jcmVhdGVFbGVtZW50TlMocSxsLnRhZyksbT17dGFnOmwudGFnLGF0dHJzOmtiP2goY2IsbC50YWcsbC5hdHRycyx7fSxxKTpsLmF0dHJzLGNoaWxkcmVuOm51bGwhPWwuY2hpbGRyZW4mJmwuY2hpbGRyZW4ubGVuZ3RoPjA/ZihjYixsLnRhZyxjLGMsbC5jaGlsZHJlbixtLmNoaWxkcmVuLCEwLDAsbC5hdHRycy5jb250ZW50ZWRpdGFibGU/Y2I6cCxxLHIpOmwuY2hpbGRyZW4sbm9kZXM6W2NiXX0sZmIubGVuZ3RoKXttLnZpZXdzPWViLG0uY29udHJvbGxlcnM9ZmI7Zm9yKHZhciBpYix4PTA7aWI9ZmJbeF07eCsrKWlmKGliLm9udW5sb2FkJiZpYi5vbnVubG9hZC4kb2xkJiYoaWIub251bmxvYWQ9aWIub251bmxvYWQuJG9sZCksZGImJmliLm9udW5sb2FkKXt2YXIgbWI9aWIub251bmxvYWQ7aWIub251bmxvYWQ9UCxpYi5vbnVubG9hZC4kb2xkPW1ifX1tLmNoaWxkcmVuJiYhbS5jaGlsZHJlbi5ub2RlcyYmKG0uY2hpbGRyZW4ubm9kZXM9W10pLCJzZWxlY3QiPT09bC50YWcmJiJ2YWx1ZSJpbiBsLmF0dHJzJiZoKGNiLGwudGFnLHt2YWx1ZTpsLmF0dHJzLnZhbHVlfSx7fSxxKSxhLmluc2VydEJlZm9yZShjYixhLmNoaWxkTm9kZXNbb118fG51bGwpfWVsc2UgY2I9bS5ub2Rlc1swXSxrYiYmaChjYixsLnRhZyxsLmF0dHJzLG0uYXR0cnMscSksbS5jaGlsZHJlbj1mKGNiLGwudGFnLGMsYyxsLmNoaWxkcmVuLG0uY2hpbGRyZW4sITEsMCxsLmF0dHJzLmNvbnRlbnRlZGl0YWJsZT9jYjpwLHEsciksbS5ub2Rlcy5pbnRhY3Q9ITAsZmIubGVuZ3RoJiYobS52aWV3cz1lYixtLmNvbnRyb2xsZXJzPWZiKSxuPT09ITAmJm51bGwhPWNiJiZhLmluc2VydEJlZm9yZShjYixhLmNoaWxkTm9kZXNbb118fG51bGwpO2lmKHR5cGVvZiBsLmF0dHJzLmNvbmZpZz09PUspe3ZhciBuYj1tLmNvbmZpZ0NvbnRleHQ9bS5jb25maWdDb250ZXh0fHx7fSxvYj1mdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmF0dHJzLmNvbmZpZy5hcHBseShhLGIpfX07ci5wdXNoKG9iKGwsW2NiLCFsYixuYixtXSkpfX1lbHNlIGlmKHR5cGVvZiBsIT1LKXt2YXIgejswPT09bS5ub2Rlcy5sZW5ndGg/KGwuJHRydXN0ZWQ/ej1rKGEsbyxsKTooej1bRC5jcmVhdGVUZXh0Tm9kZShsKV0sYS5ub2RlTmFtZS5tYXRjaChPKXx8YS5pbnNlcnRCZWZvcmUoelswXSxhLmNoaWxkTm9kZXNbb118fG51bGwpKSxtPSJzdHJpbmcgbnVtYmVyIGJvb2xlYW4iLmluZGV4T2YodHlwZW9mIGwpPi0xP25ldyBsLmNvbnN0cnVjdG9yKGwpOmwsbS5ub2Rlcz16KTptLnZhbHVlT2YoKSE9PWwudmFsdWVPZigpfHxuPT09ITA/KHo9bS5ub2RlcyxwJiZwPT09RC5hY3RpdmVFbGVtZW50fHwobC4kdHJ1c3RlZD8oaSh6LG0pLHo9ayhhLG8sbCkpOiJ0ZXh0YXJlYSI9PT1iP2EudmFsdWU9bDpwP3AuaW5uZXJIVE1MPWw6KCgxPT09elswXS5ub2RlVHlwZXx8ei5sZW5ndGg+MSkmJihpKG0ubm9kZXMsbSksej1bRC5jcmVhdGVUZXh0Tm9kZShsKV0pLGEuaW5zZXJ0QmVmb3JlKHpbMF0sYS5jaGlsZE5vZGVzW29dfHxudWxsKSx6WzBdLm5vZGVWYWx1ZT1sKSksbT1uZXcgbC5jb25zdHJ1Y3RvcihsKSxtLm5vZGVzPXopOm0ubm9kZXMuaW50YWN0PSEwfXJldHVybiBtfWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gYS5hY3Rpb24tYi5hY3Rpb258fGEuaW5kZXgtYi5pbmRleH1mdW5jdGlvbiBoKGEsYixjLGQsZSl7Zm9yKHZhciBmIGluIGMpe3ZhciBnPWNbZl0saD1kW2ZdO2lmKGYgaW4gZCYmaD09PWcpInZhbHVlIj09PWYmJiJpbnB1dCI9PT1iJiZhLnZhbHVlIT1nJiYoYS52YWx1ZT1nKTtlbHNle2RbZl09Zzt0cnl7aWYoImNvbmZpZyI9PT1mfHwia2V5Ij09Ziljb250aW51ZTtpZih0eXBlb2YgZz09PUsmJjA9PT1mLmluZGV4T2YoIm9uIikpYVtmXT1sKGcsYSk7ZWxzZSBpZigic3R5bGUiPT09ZiYmbnVsbCE9ZyYmTC5jYWxsKGcpPT09SCl7Zm9yKHZhciBpIGluIGcpKG51bGw9PWh8fGhbaV0hPT1nW2ldKSYmKGEuc3R5bGVbaV09Z1tpXSk7Zm9yKHZhciBpIGluIGgpaSBpbiBnfHwoYS5zdHlsZVtpXT0iIil9ZWxzZSBudWxsIT1lPyJocmVmIj09PWY/YS5zZXRBdHRyaWJ1dGVOUygiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsImhyZWYiLGcpOiJjbGFzc05hbWUiPT09Zj9hLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGcpOmEuc2V0QXR0cmlidXRlKGYsZyk6ZiBpbiBhJiYibGlzdCIhPT1mJiYic3R5bGUiIT09ZiYmImZvcm0iIT09ZiYmInR5cGUiIT09ZiYmIndpZHRoIiE9PWYmJiJoZWlnaHQiIT09Zj8oImlucHV0IiE9PWJ8fGFbZl0hPT1nKSYmKGFbZl09Zyk6YS5zZXRBdHRyaWJ1dGUoZixnKX1jYXRjaChqKXtpZihqLm1lc3NhZ2UuaW5kZXhPZigiSW52YWxpZCBhcmd1bWVudCIpPDApdGhyb3cgan19fXJldHVybiBkfWZ1bmN0aW9uIGkoYSxiKXtmb3IodmFyIGM9YS5sZW5ndGgtMTtjPi0xO2MtLSlpZihhW2NdJiZhW2NdLnBhcmVudE5vZGUpe3RyeXthW2NdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYVtjXSl9Y2F0Y2goZCl7fWI9W10uY29uY2F0KGIpLGJbY10mJmooYltjXSl9MCE9YS5sZW5ndGgmJihhLmxlbmd0aD0wKX1mdW5jdGlvbiBqKGEpe2lmKGEuY29uZmlnQ29udGV4dCYmdHlwZW9mIGEuY29uZmlnQ29udGV4dC5vbnVubG9hZD09PUsmJihhLmNvbmZpZ0NvbnRleHQub251bmxvYWQoKSxhLmNvbmZpZ0NvbnRleHQub251bmxvYWQ9bnVsbCksYS5jb250cm9sbGVycylmb3IodmFyIGIsYz0wO2I9YS5jb250cm9sbGVyc1tjXTtjKyspdHlwZW9mIGIub251bmxvYWQ9PT1LJiZiLm9udW5sb2FkKHtwcmV2ZW50RGVmYXVsdDpQfSk7aWYoYS5jaGlsZHJlbilpZihMLmNhbGwoYS5jaGlsZHJlbik9PT1JKWZvcih2YXIgZCxjPTA7ZD1hLmNoaWxkcmVuW2NdO2MrKylqKGQpO2Vsc2UgYS5jaGlsZHJlbi50YWcmJmooYS5jaGlsZHJlbil9ZnVuY3Rpb24gayhhLGIsYyl7dmFyIGQ9YS5jaGlsZE5vZGVzW2JdO2lmKGQpe3ZhciBlPTEhPWQubm9kZVR5cGUsZj1ELmNyZWF0ZUVsZW1lbnQoInNwYW4iKTtlPyhhLmluc2VydEJlZm9yZShmLGR8fG51bGwpLGYuaW5zZXJ0QWRqYWNlbnRIVE1MKCJiZWZvcmViZWdpbiIsYyksYS5yZW1vdmVDaGlsZChmKSk6ZC5pbnNlcnRBZGphY2VudEhUTUwoImJlZm9yZWJlZ2luIixjKX1lbHNlIGEuaW5zZXJ0QWRqYWNlbnRIVE1MKCJiZWZvcmVlbmQiLGMpO2Zvcih2YXIgZz1bXTthLmNoaWxkTm9kZXNbYl0hPT1kOylnLnB1c2goYS5jaGlsZE5vZGVzW2JdKSxiKys7cmV0dXJuIGd9ZnVuY3Rpb24gbChhLGIpe3JldHVybiBmdW5jdGlvbihjKXtjPWN8fGV2ZW50LGUucmVkcmF3LnN0cmF0ZWd5KCJkaWZmIiksZS5zdGFydENvbXB1dGF0aW9uKCk7dHJ5e3JldHVybiBhLmNhbGwoYixjKX1maW5hbGx5e2ViKCl9fX1mdW5jdGlvbiBtKGEpe3ZhciBiPVMuaW5kZXhPZihhKTtyZXR1cm4gMD5iP1MucHVzaChhKS0xOmJ9ZnVuY3Rpb24gbihhKXt2YXIgYj1mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoJiYoYT1hcmd1bWVudHNbMF0pLGF9O3JldHVybiBiLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiBhfSxifWZ1bmN0aW9uIG8oYSxiKXt2YXIgYz1mdW5jdGlvbigpe3JldHVybihhLmNvbnRyb2xsZXJ8fFApLmFwcGx5KHRoaXMsYil8fHRoaXN9LGQ9ZnVuY3Rpb24oYyl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MSYmKGI9Yi5jb25jYXQoW10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpKSxhLnZpZXcuYXBwbHkoYSxiP1tjXS5jb25jYXQoYik6W2NdKX07ZC4kb3JpZ2luYWw9YS52aWV3O3ZhciBlPXtjb250cm9sbGVyOmMsdmlldzpkfTtyZXR1cm4gYlswXSYmbnVsbCE9YlswXS5rZXkmJihlLmF0dHJzPXtrZXk6YlswXS5rZXl9KSxlfWZ1bmN0aW9uIHAoKXskJiYoJCgpLCQ9bnVsbCk7Zm9yKHZhciBhLGI9MDthPVZbYl07YisrKWlmKFhbYl0pe3ZhciBjPVdbYl0uY29udHJvbGxlciYmV1tiXS5jb250cm9sbGVyLiQkYXJncz9bWFtiXV0uY29uY2F0KFdbYl0uY29udHJvbGxlci4kJGFyZ3MpOltYW2JdXTtlLnJlbmRlcihhLFdbYl0udmlldz9XW2JdLnZpZXcoWFtiXSxjKToiIil9XyYmKF8oKSxfPW51bGwpLFk9bnVsbCxaPW5ldyBEYXRlLGUucmVkcmF3LnN0cmF0ZWd5KCJkaWZmIil9ZnVuY3Rpb24gcShhKXtyZXR1cm4gYS5zbGljZShoYltlLnJvdXRlLm1vZGVdLmxlbmd0aCl9ZnVuY3Rpb24gcihhLGIsYyl7ZmI9e307dmFyIGQ9Yy5pbmRleE9mKCI/Iik7LTEhPT1kJiYoZmI9dihjLnN1YnN0cihkKzEsYy5sZW5ndGgpKSxjPWMuc3Vic3RyKDAsZCkpO3ZhciBmPU9iamVjdC5rZXlzKGIpLGc9Zi5pbmRleE9mKGMpO2lmKC0xIT09ZylyZXR1cm4gZS5tb3VudChhLGJbZltnXV0pLCEwO2Zvcih2YXIgaCBpbiBiKXtpZihoPT09YylyZXR1cm4gZS5tb3VudChhLGJbaF0pLCEwO3ZhciBpPW5ldyBSZWdFeHAoIl4iK2gucmVwbGFjZSgvOlteXC9dKz9cLnszfS9nLCIoLio/KSIpLnJlcGxhY2UoLzpbXlwvXSsvZywiKFteXFwvXSspIikrIi8/JCIpO2lmKGkudGVzdChjKSlyZXR1cm4gYy5yZXBsYWNlKGksZnVuY3Rpb24oKXtmb3IodmFyIGM9aC5tYXRjaCgvOlteXC9dKy9nKXx8W10sZD1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxLC0yKSxmPTAsZz1jLmxlbmd0aDtnPmY7ZisrKWZiW2NbZl0ucmVwbGFjZSgvOnxcLi9nLCIiKV09ZGVjb2RlVVJJQ29tcG9uZW50KGRbZl0pO2UubW91bnQoYSxiW2hdKX0pLCEwfX1mdW5jdGlvbiBzKGEpe2lmKGE9YXx8ZXZlbnQsIWEuY3RybEtleSYmIWEubWV0YUtleSYmMiE9PWEud2hpY2gpe2EucHJldmVudERlZmF1bHQ/YS5wcmV2ZW50RGVmYXVsdCgpOmEucmV0dXJuVmFsdWU9ITE7Zm9yKHZhciBiPWEuY3VycmVudFRhcmdldHx8YS5zcmNFbGVtZW50LGM9InBhdGhuYW1lIj09PWUucm91dGUubW9kZSYmYi5zZWFyY2g/dihiLnNlYXJjaC5zbGljZSgxKSk6e307YiYmIkEiIT1iLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7KWI9Yi5wYXJlbnROb2RlO2Uucm91dGUoYltlLnJvdXRlLm1vZGVdLnNsaWNlKGhiW2Uucm91dGUubW9kZV0ubGVuZ3RoKSxjKX19ZnVuY3Rpb24gdCgpeyJoYXNoIiE9ZS5yb3V0ZS5tb2RlJiZFLmhhc2g/RS5oYXNoPUUuaGFzaDpiLnNjcm9sbFRvKDAsMCl9ZnVuY3Rpb24gdShhLGIpe3ZhciBkPXt9LGU9W107Zm9yKHZhciBmIGluIGEpe3ZhciBnPWI/YisiWyIrZisiXSI6ZixoPWFbZl0saT1MLmNhbGwoaCksaj1udWxsPT09aD9lbmNvZGVVUklDb21wb25lbnQoZyk6aT09PUg/dShoLGcpOmk9PT1JP2gucmVkdWNlKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGRbZ118fChkW2ddPXt9KSxkW2ddW2JdP2E6KGRbZ11bYl09ITAsYS5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KGcpKyI9IitlbmNvZGVVUklDb21wb25lbnQoYikpKX0sW10pLmpvaW4oIiYiKTplbmNvZGVVUklDb21wb25lbnQoZykrIj0iK2VuY29kZVVSSUNvbXBvbmVudChoKTtoIT09YyYmZS5wdXNoKGopfXJldHVybiBlLmpvaW4oIiYiKX1mdW5jdGlvbiB2KGEpeyI/Ij09PWEuY2hhckF0KDApJiYoYT1hLnN1YnN0cmluZygxKSk7Zm9yKHZhciBiPWEuc3BsaXQoIiYiKSxjPXt9LGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspe3ZhciBmPWJbZF0uc3BsaXQoIj0iKSxnPWRlY29kZVVSSUNvbXBvbmVudChmWzBdKSxoPTI9PWYubGVuZ3RoP2RlY29kZVVSSUNvbXBvbmVudChmWzFdKTpudWxsO251bGwhPWNbZ10/KEwuY2FsbChjW2ddKSE9PUkmJihjW2ddPVtjW2ddXSksY1tnXS5wdXNoKGgpKTpjW2ddPWh9cmV0dXJuIGN9ZnVuY3Rpb24gdyhhKXt2YXIgYj1tKGEpO2koYS5jaGlsZE5vZGVzLFRbYl0pLFRbYl09Y31mdW5jdGlvbiB4KGEsYil7dmFyIGM9ZS5wcm9wKGIpO3JldHVybiBhLnRoZW4oYyksYy50aGVuPWZ1bmN0aW9uKGMsZCl7cmV0dXJuIHgoYS50aGVuKGMsZCksYil9LGN9ZnVuY3Rpb24geShhLGIpe2Z1bmN0aW9uIGMoYSl7bD1hfHxqLG4ubWFwKGZ1bmN0aW9uKGEpe2w9PT1pJiZhLnJlc29sdmUobSl8fGEucmVqZWN0KG0pfSl9ZnVuY3Rpb24gZChhLGIsYyxkKXtpZigobnVsbCE9bSYmTC5jYWxsKG0pPT09SHx8dHlwZW9mIG09PT1LKSYmdHlwZW9mIGE9PT1LKXRyeXt2YXIgZj0wO2EuY2FsbChtLGZ1bmN0aW9uKGEpe2YrK3x8KG09YSxiKCkpfSxmdW5jdGlvbihhKXtmKyt8fChtPWEsYygpKX0pfWNhdGNoKGcpe2UuZGVmZXJyZWQub25lcnJvcihnKSxtPWcsYygpfWVsc2UgZCgpfWZ1bmN0aW9uIGYoKXt2YXIgajt0cnl7aj1tJiZtLnRoZW59Y2F0Y2gobil7cmV0dXJuIGUuZGVmZXJyZWQub25lcnJvcihuKSxtPW4sbD1oLGYoKX1kKGosZnVuY3Rpb24oKXtsPWcsZigpfSxmdW5jdGlvbigpe2w9aCxmKCl9LGZ1bmN0aW9uKCl7dHJ5e2w9PT1nJiZ0eXBlb2YgYT09PUs/bT1hKG0pOmw9PT1oJiYiZnVuY3Rpb24iPT10eXBlb2YgYiYmKG09YihtKSxsPWcpfWNhdGNoKGYpe3JldHVybiBlLmRlZmVycmVkLm9uZXJyb3IoZiksbT1mLGMoKX1tPT09az8obT1UeXBlRXJyb3IoKSxjKCkpOmQoaixmdW5jdGlvbigpe2MoaSl9LGMsZnVuY3Rpb24oKXtjKGw9PT1nJiZpKX0pfSl9dmFyIGc9MSxoPTIsaT0zLGo9NCxrPXRoaXMsbD0wLG09MCxuPVtdO2sucHJvbWlzZT17fSxrLnJlc29sdmU9ZnVuY3Rpb24oYSl7cmV0dXJuIGx8fChtPWEsbD1nLGYoKSksdGhpc30say5yZWplY3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGx8fChtPWEsbD1oLGYoKSksdGhpc30say5wcm9taXNlLnRoZW49ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgeShhLGIpO3JldHVybiBsPT09aT9jLnJlc29sdmUobSk6bD09PWo/Yy5yZWplY3QobSk6bi5wdXNoKGMpLGMucHJvbWlzZX19ZnVuY3Rpb24geihhKXtyZXR1cm4gYX1mdW5jdGlvbiBBKGEpe2lmKCFhLmRhdGFUeXBlfHwianNvbnAiIT09YS5kYXRhVHlwZS50b0xvd2VyQ2FzZSgpKXt2YXIgZD1uZXcgYi5YTUxIdHRwUmVxdWVzdDtpZihkLm9wZW4oYS5tZXRob2QsYS51cmwsITAsYS51c2VyLGEucGFzc3dvcmQpLGQub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PWQucmVhZHlTdGF0ZSYmKGQuc3RhdHVzPj0yMDAmJmQuc3RhdHVzPDMwMD9hLm9ubG9hZCh7dHlwZToibG9hZCIsdGFyZ2V0OmR9KTphLm9uZXJyb3Ioe3R5cGU6ImVycm9yIix0YXJnZXQ6ZH0pKX0sYS5zZXJpYWxpemU9PT1KU09OLnN0cmluZ2lmeSYmYS5kYXRhJiYiR0VUIiE9PWEubWV0aG9kJiZkLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgiKSxhLmRlc2VyaWFsaXplPT09SlNPTi5wYXJzZSYmZC5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0LyoiKSx0eXBlb2YgYS5jb25maWc9PT1LKXt2YXIgZT1hLmNvbmZpZyhkLGEpO251bGwhPWUmJihkPWUpfXZhciBmPSJHRVQiIT09YS5tZXRob2QmJmEuZGF0YT9hLmRhdGE6IiI7aWYoZiYmTC5jYWxsKGYpIT1KJiZmLmNvbnN0cnVjdG9yIT1iLkZvcm1EYXRhKXRocm93IlJlcXVlc3QgZGF0YSBzaG91bGQgYmUgZWl0aGVyIGJlIGEgc3RyaW5nIG9yIEZvcm1EYXRhLiBDaGVjayB0aGUgYHNlcmlhbGl6ZWAgb3B0aW9uIGluIGBtLnJlcXVlc3RgIjtyZXR1cm4gZC5zZW5kKGYpLGR9dmFyIGc9Im1pdGhyaWxfY2FsbGJhY2tfIisobmV3IERhdGUpLmdldFRpbWUoKSsiXyIrTWF0aC5yb3VuZCgxZTE2Kk1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKDM2KSxoPUQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7YltnXT1mdW5jdGlvbihkKXtoLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaCksYS5vbmxvYWQoe3R5cGU6ImxvYWQiLHRhcmdldDp7cmVzcG9uc2VUZXh0OmR9fSksYltnXT1jfSxoLm9uZXJyb3I9ZnVuY3Rpb24oKXtyZXR1cm4gaC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGgpLGEub25lcnJvcih7dHlwZToiZXJyb3IiLHRhcmdldDp7c3RhdHVzOjUwMCxyZXNwb25zZVRleHQ6SlNPTi5zdHJpbmdpZnkoe2Vycm9yOiJFcnJvciBtYWtpbmcganNvbnAgcmVxdWVzdCJ9KX19KSxiW2ddPWMsITF9LGgub25sb2FkPWZ1bmN0aW9uKCl7cmV0dXJuITF9LGguc3JjPWEudXJsKyhhLnVybC5pbmRleE9mKCI/Iik+MD8iJiI6Ij8iKSsoYS5jYWxsYmFja0tleT9hLmNhbGxiYWNrS2V5OiJjYWxsYmFjayIpKyI9IitnKyImIit1KGEuZGF0YXx8e30pLEQuYm9keS5hcHBlbmRDaGlsZChoKX1mdW5jdGlvbiBCKGEsYixjKXtpZigiR0VUIj09PWEubWV0aG9kJiYianNvbnAiIT1hLmRhdGFUeXBlKXt2YXIgZD1hLnVybC5pbmRleE9mKCI/Iik8MD8iPyI6IiYiLGU9dShiKTthLnVybD1hLnVybCsoZT9kK2U6IiIpfWVsc2UgYS5kYXRhPWMoYik7cmV0dXJuIGF9ZnVuY3Rpb24gQyhhLGIpe3ZhciBjPWEubWF0Y2goLzpbYS16XVx3Ky9naSk7aWYoYyYmYilmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXS5zbGljZSgxKTthPWEucmVwbGFjZShjW2RdLGJbZV0pLGRlbGV0ZSBiW2VdfXJldHVybiBhfXZhciBELEUsRixHLEg9IltvYmplY3QgT2JqZWN0XSIsST0iW29iamVjdCBBcnJheV0iLEo9IltvYmplY3QgU3RyaW5nXSIsSz0iZnVuY3Rpb24iLEw9e30udG9TdHJpbmcsTT0vKD86KF58I3xcLikoW14jXC5cW1xdXSspKXwoXFsuKz9cXSkvZyxOPS9cWyguKz8pKD86PSgifCd8KSguKj8pXDIpP1xdLyxPPS9eKEFSRUF8QkFTRXxCUnxDT0x8Q09NTUFORHxFTUJFRHxIUnxJTUd8SU5QVVR8S0VZR0VOfExJTkt8TUVUQXxQQVJBTXxTT1VSQ0V8VFJBQ0t8V0JSKSQvLFA9ZnVuY3Rpb24oKXt9O2QoYik7dmFyIFEsUj17YXBwZW5kQ2hpbGQ6ZnVuY3Rpb24oYSl7UT09PWMmJihRPUQuY3JlYXRlRWxlbWVudCgiaHRtbCIpKSxELmRvY3VtZW50RWxlbWVudCYmRC5kb2N1bWVudEVsZW1lbnQhPT1hP0QucmVwbGFjZUNoaWxkKGEsRC5kb2N1bWVudEVsZW1lbnQpOkQuYXBwZW5kQ2hpbGQoYSksdGhpcy5jaGlsZE5vZGVzPUQuY2hpbGROb2Rlc30saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKGEpe3RoaXMuYXBwZW5kQ2hpbGQoYSl9LGNoaWxkTm9kZXM6W119LFM9W10sVD17fTtlLnJlbmRlcj1mdW5jdGlvbihhLGIsZCl7dmFyIGU9W107aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJFbnN1cmUgdGhlIERPTSBlbGVtZW50IGJlaW5nIHBhc3NlZCB0byBtLnJvdXRlL20ubW91bnQvbS5yZW5kZXIgaXMgbm90IHVuZGVmaW5lZC4iKTt2YXIgZz1tKGEpLGg9YT09PUQsaj1ofHxhPT09RC5kb2N1bWVudEVsZW1lbnQ/UjphO2gmJiJodG1sIiE9Yi50YWcmJihiPXt0YWc6Imh0bWwiLGF0dHJzOnt9LGNoaWxkcmVuOmJ9KSxUW2ddPT09YyYmaShqLmNoaWxkTm9kZXMpLGQ9PT0hMCYmdyhhKSxUW2ddPWYoaixudWxsLGMsYyxiLFRbZ10sITEsMCxudWxsLGMsZSk7Zm9yKHZhciBrPTAsbD1lLmxlbmd0aDtsPms7aysrKWVba10oKX0sZS50cnVzdD1mdW5jdGlvbihhKXtyZXR1cm4gYT1uZXcgU3RyaW5nKGEpLGEuJHRydXN0ZWQ9ITAsYX0sZS5wcm9wPWZ1bmN0aW9uKGEpe3JldHVybihudWxsIT1hJiZMLmNhbGwoYSk9PT1IfHx0eXBlb2YgYT09PUspJiZ0eXBlb2YgYS50aGVuPT09Sz94KGEpOm4oYSl9O3ZhciBVLFY9W10sVz1bXSxYPVtdLFk9bnVsbCxaPTAsJD1udWxsLF89bnVsbCxhYj1bXSxiYj0xNjtlLmNvbXBvbmVudD1mdW5jdGlvbihhKXtyZXR1cm4gbyhhLFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKX0sZS5tb3VudD1lLm1vZHVsZT1mdW5jdGlvbihhLGIpe2lmKCFhKXRocm93IG5ldyBFcnJvcigiUGxlYXNlIGVuc3VyZSB0aGUgRE9NIGVsZW1lbnQgZXhpc3RzIGJlZm9yZSByZW5kZXJpbmcgYSB0ZW1wbGF0ZSBpbnRvIGl0LiIpO3ZhciBjPVYuaW5kZXhPZihhKTswPmMmJihjPVYubGVuZ3RoKTtmb3IodmFyIGQsZj0hMSxnPXtwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2Y9ITAsJD1fPW51bGx9fSxoPTA7ZD1hYltoXTtoKyspZC5oYW5kbGVyLmNhbGwoZC5jb250cm9sbGVyLGcpLGQuY29udHJvbGxlci5vbnVubG9hZD1udWxsO2lmKGYpZm9yKHZhciBkLGg9MDtkPWFiW2hdO2grKylkLmNvbnRyb2xsZXIub251bmxvYWQ9ZC5oYW5kbGVyO2Vsc2UgYWI9W107aWYoWFtjXSYmdHlwZW9mIFhbY10ub251bmxvYWQ9PT1LJiZYW2NdLm9udW5sb2FkKGcpLCFmKXtlLnJlZHJhdy5zdHJhdGVneSgiYWxsIiksZS5zdGFydENvbXB1dGF0aW9uKCksVltjXT1hLGFyZ3VtZW50cy5sZW5ndGg+MiYmKGI9c3ViY29tcG9uZW50KGIsW10uc2xpY2UuY2FsbChhcmd1bWVudHMsMikpKTt2YXIgaT1VPWI9Ynx8e2NvbnRyb2xsZXI6ZnVuY3Rpb24oKXt9fSxqPWIuY29udHJvbGxlcnx8UCxrPW5ldyBqO3JldHVybiBpPT09VSYmKFhbY109ayxXW2NdPWIpLGViKCksWFtjXX19O3ZhciBjYj0hMTtlLnJlZHJhdz1mdW5jdGlvbihhKXtjYnx8KGNiPSEwLFkmJmEhPT0hMD8oRj09PWIucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxuZXcgRGF0ZS1aPmJiKSYmKFk+MCYmRyhZKSxZPUYocCxiYikpOihwKCksWT1GKGZ1bmN0aW9uKCl7WT1udWxsfSxiYikpLGNiPSExKX0sZS5yZWRyYXcuc3RyYXRlZ3k9ZS5wcm9wKCk7dmFyIGRiPTA7ZS5zdGFydENvbXB1dGF0aW9uPWZ1bmN0aW9uKCl7ZGIrK30sZS5lbmRDb21wdXRhdGlvbj1mdW5jdGlvbigpe2RiPU1hdGgubWF4KGRiLTEsMCksMD09PWRiJiZlLnJlZHJhdygpfTt2YXIgZWI9ZnVuY3Rpb24oKXsibm9uZSI9PWUucmVkcmF3LnN0cmF0ZWd5KCk/KGRiLS0sZS5yZWRyYXcuc3RyYXRlZ3koImRpZmYiKSk6ZS5lbmRDb21wdXRhdGlvbigpfTtlLndpdGhBdHRyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe2M9Y3x8ZXZlbnQ7dmFyIGQ9Yy5jdXJyZW50VGFyZ2V0fHx0aGlzO2IoYSBpbiBkP2RbYV06ZC5nZXRBdHRyaWJ1dGUoYSkpfX07dmFyIGZiLGdiLGhiPXtwYXRobmFtZToiIixoYXNoOiIjIixzZWFyY2g6Ij8ifSxpYj1QLGpiPSExO3JldHVybiBlLnJvdXRlPWZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGdiO2lmKDM9PT1hcmd1bWVudHMubGVuZ3RoJiZMLmNhbGwoYXJndW1lbnRzWzFdKT09PUope3ZhciBhPWFyZ3VtZW50c1swXSxjPWFyZ3VtZW50c1sxXSxkPWFyZ3VtZW50c1syXTtpYj1mdW5jdGlvbihiKXt2YXIgZj1nYj1xKGIpO2lmKCFyKGEsZCxmKSl7aWYoamIpdGhyb3cgbmV3IEVycm9yKCJFbnN1cmUgdGhlIGRlZmF1bHQgcm91dGUgbWF0Y2hlcyBvbmUgb2YgdGhlIHJvdXRlcyBkZWZpbmVkIGluIG0ucm91dGUiKTtqYj0hMCxlLnJvdXRlKGMsITApLGpiPSExfX07dmFyIGY9Imhhc2giPT09ZS5yb3V0ZS5tb2RlPyJvbmhhc2hjaGFuZ2UiOiJvbnBvcHN0YXRlIjtiW2ZdPWZ1bmN0aW9uKCl7dmFyIGE9RVtlLnJvdXRlLm1vZGVdOyJwYXRobmFtZSI9PT1lLnJvdXRlLm1vZGUmJihhKz1FLnNlYXJjaCksZ2IhPXEoYSkmJmliKGEpfSwkPXQsYltmXSgpfWVsc2UgaWYoYXJndW1lbnRzWzBdLmFkZEV2ZW50TGlzdGVuZXJ8fGFyZ3VtZW50c1swXS5hdHRhY2hFdmVudCl7dmFyIGc9YXJndW1lbnRzWzBdLGg9KGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0sYXJndW1lbnRzWzNdKTtnLmhyZWY9KCJwYXRobmFtZSIhPT1lLnJvdXRlLm1vZGU/RS5wYXRobmFtZToiIikraGJbZS5yb3V0ZS5tb2RlXStoLmF0dHJzLmhyZWYsZy5hZGRFdmVudExpc3RlbmVyPyhnLnJlbW92ZUV2ZW50TGlzdGVuZXIoImNsaWNrIixzKSxnLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixzKSk6KGcuZGV0YWNoRXZlbnQoIm9uY2xpY2siLHMpLGcuYXR0YWNoRXZlbnQoIm9uY2xpY2siLHMpKX1lbHNlIGlmKEwuY2FsbChhcmd1bWVudHNbMF0pPT09Sil7dmFyIGk9Z2I7Z2I9YXJndW1lbnRzWzBdO3ZhciBqPWFyZ3VtZW50c1sxXXx8e30saz1nYi5pbmRleE9mKCI/IiksbD1rPi0xP3YoZ2Iuc2xpY2UoaysxKSk6e307Zm9yKHZhciBtIGluIGopbFttXT1qW21dO3ZhciBuPXUobCksbz1rPi0xP2diLnNsaWNlKDAsayk6Z2I7biYmKGdiPW8rKC0xPT09by5pbmRleE9mKCI/Iik/Ij8iOiImIikrbik7dmFyIHA9KDM9PT1hcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1syXTphcmd1bWVudHNbMV0pPT09ITB8fGk9PT1hcmd1bWVudHNbMF07Yi5oaXN0b3J5LnB1c2hTdGF0ZT8oJD10LF89ZnVuY3Rpb24oKXtiLmhpc3RvcnlbcD8icmVwbGFjZVN0YXRlIjoicHVzaFN0YXRlIl0obnVsbCxELnRpdGxlLGhiW2Uucm91dGUubW9kZV0rZ2IpfSxpYihoYltlLnJvdXRlLm1vZGVdK2diKSk6KEVbZS5yb3V0ZS5tb2RlXT1nYixpYihoYltlLnJvdXRlLm1vZGVdK2diKSl9fSxlLnJvdXRlLnBhcmFtPWZ1bmN0aW9uKGEpe2lmKCFmYil0aHJvdyBuZXcgRXJyb3IoIllvdSBtdXN0IGNhbGwgbS5yb3V0ZShlbGVtZW50LCBkZWZhdWx0Um91dGUsIHJvdXRlcykgYmVmb3JlIGNhbGxpbmcgbS5yb3V0ZS5wYXJhbSgpIik7cmV0dXJuIGZiW2FdfSxlLnJvdXRlLm1vZGU9InNlYXJjaCIsZS5yb3V0ZS5idWlsZFF1ZXJ5U3RyaW5nPXUsZS5yb3V0ZS5wYXJzZVF1ZXJ5U3RyaW5nPXYsZS5kZWZlcnJlZD1mdW5jdGlvbigpe3ZhciBhPW5ldyB5O3JldHVybiBhLnByb21pc2U9eChhLnByb21pc2UpLGF9LGUuZGVmZXJyZWQub25lcnJvcj1mdW5jdGlvbihhKXtpZigiW29iamVjdCBFcnJvcl0iPT09TC5jYWxsKGEpJiYhYS5jb25zdHJ1Y3Rvci50b1N0cmluZygpLm1hdGNoKC8gRXJyb3IvKSl0aHJvdyBhfSxlLnN5bmM9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZ1thXT1lLGJ8fChjPSJyZWplY3QiKSwwPT09LS1mJiYoZC5wcm9taXNlKGcpLGRbY10oZykpLGV9fXZhciBjPSJyZXNvbHZlIixkPWUuZGVmZXJyZWQoKSxmPWEubGVuZ3RoLGc9bmV3IEFycmF5KGYpO2lmKGEubGVuZ3RoPjApZm9yKHZhciBoPTA7aDxhLmxlbmd0aDtoKyspYVtoXS50aGVuKGIoaCwhMCksYihoLCExKSk7ZWxzZSBkLnJlc29sdmUoW10pO3JldHVybiBkLnByb21pc2V9LGUucmVxdWVzdD1mdW5jdGlvbihhKXthLmJhY2tncm91bmQhPT0hMCYmZS5zdGFydENvbXB1dGF0aW9uKCk7dmFyIGI9bmV3IHksYz1hLmRhdGFUeXBlJiYianNvbnAiPT09YS5kYXRhVHlwZS50b0xvd2VyQ2FzZSgpLGQ9YS5zZXJpYWxpemU9Yz96OmEuc2VyaWFsaXplfHxKU09OLnN0cmluZ2lmeSxmPWEuZGVzZXJpYWxpemU9Yz96OmEuZGVzZXJpYWxpemV8fEpTT04ucGFyc2UsZz1jP2Z1bmN0aW9uKGEpe3JldHVybiBhLnJlc3BvbnNlVGV4dH06YS5leHRyYWN0fHxmdW5jdGlvbihhKXtyZXR1cm4gMD09PWEucmVzcG9uc2VUZXh0Lmxlbmd0aCYmZj09PUpTT04ucGFyc2U/bnVsbDphLnJlc3BvbnNlVGV4dH07cmV0dXJuIGEubWV0aG9kPShhLm1ldGhvZHx8IkdFVCIpLnRvVXBwZXJDYXNlKCksYS51cmw9QyhhLnVybCxhLmRhdGEpLGE9QihhLGEuZGF0YSxkKSxhLm9ubG9hZD1hLm9uZXJyb3I9ZnVuY3Rpb24oYyl7dHJ5e2M9Y3x8ZXZlbnQ7dmFyIGQ9KCJsb2FkIj09PWMudHlwZT9hLnVud3JhcFN1Y2Nlc3M6YS51bndyYXBFcnJvcil8fHosaD1kKGYoZyhjLnRhcmdldCxhKSksYy50YXJnZXQpO2lmKCJsb2FkIj09PWMudHlwZSlpZihMLmNhbGwoaCk9PT1JJiZhLnR5cGUpZm9yKHZhciBpPTA7aTxoLmxlbmd0aDtpKyspaFtpXT1uZXcgYS50eXBlKGhbaV0pO2Vsc2UgYS50eXBlJiYoaD1uZXcgYS50eXBlKGgpKTtiWyJsb2FkIj09PWMudHlwZT8icmVzb2x2ZSI6InJlamVjdCJdKGgpfWNhdGNoKGMpe2UuZGVmZXJyZWQub25lcnJvcihjKSxiLnJlamVjdChjKX1hLmJhY2tncm91bmQhPT0hMCYmZS5lbmRDb21wdXRhdGlvbigpfSxBKGEpLGIucHJvbWlzZT14KGIucHJvbWlzZSxhLmluaXRpYWxWYWx1ZSksYi5wcm9taXNlfSxlLmRlcHM9ZnVuY3Rpb24oYSl7cmV0dXJuIGQoYj1hfHxiKSxifSxlLmRlcHMuZmFjdG9yeT1hLGV9KCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSk7InVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGUmJm51bGwhPT1tb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPW06ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKGZ1bmN0aW9uKCl7cmV0dXJuIG19KTsNCi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1pdGhyaWwubWluLmpzLm1hcA=="

//encoded version of (most of) asker.js 
var wholepacket="DQogICAgICAgIHZhciB2aWV3TW9kZWxNYXAgPSBmdW5jdGlvbihzaWduYXR1cmUpIHsNCiAgICAgICAgICB2YXIgbWFwID0ge30NCiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oa2V5KSB7DQogICAgICAgICAgICBpZiAoIW1hcFtrZXldKSB7DQogICAgICAgICAgICAgICAgbWFwW2tleV0gPSB7fQ0KICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gc2lnbmF0dXJlKSBtYXBba2V5XVtwcm9wXSA9IG0ucHJvcChzaWduYXR1cmVbcHJvcF0oKSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBtYXBba2V5XQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGFza2VyLmRpc3Bvc2UgPSBmdW5jdGlvbihjb25kaXRpb25zLCBydWxlcyl7DQogICAgICAgICAgdmFyIGRpc3Bvc2l0aW9uID0gZmFsc2U7DQogICAgICAgICAgaWYgKGNvbmRpdGlvbnM9PT10cnVlKSB7DQogICAgICAgICAgICBkaXNwb3NpdGlvbiA9IHRydWU7DQogICAgICAgICAgfSAvL2lmIHNob3dJZiBpcyBzZXQgdG8gdHJ1ZQ0KICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgdmFyIGVuZ2luZSA9IG5ldyBSdWxlRW5naW5lKHsNCiAgICAgICAgICAgICAgY29uZGl0aW9uczogY29uZGl0aW9ucywNCiAgICAgICAgICAgICAgYWN0aW9uczogW10NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICBkaXNwb3NpdGlvbiA9IGVuZ2luZS5ydW4ocnVsZXMsIFtdKQ0KICAgICAgICAgIH0NCiAgICAgICAgICByZXR1cm4gZGlzcG9zaXRpb247DQogICAgICAgIH0NCg0KICAgICAgICBhc2tlci5idWlsZEFuc3dlcnMgPSBmdW5jdGlvbihsaWJyYXJ5LCBhbnN3ZXJzKXsNCiAgICAgICAgICB2YXIgbGliID0ge30NCiAgICAgICAgICBPYmplY3Qua2V5cyhsaWJyYXJ5KS5tYXAoZnVuY3Rpb24oaWQpew0KICAgICAgICAgICAgbGliW2xpYnJhcnlbaWRdLm5hbWVdID0gYXNrZXIuc2V0T25lKGxpYnJhcnlbaWRdLCBhbnN3ZXJzKQ0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHJldHVybiBsaWINCiAgICAgICAgfQ0KDQoNCiAgICAgICAgYXNrZXIuc2V0T25lID0gZnVuY3Rpb24oZW50cnksIGNvbmRpdGlvbnMpew0KICAgICAgICAgIHZhciBhbnN3ZXIgPSAiIg0KICAgICAgICAgIGZvcihjdiBvZiBlbnRyeS5jb25kaXRpb25hbFZhbHVlcyl7DQogICAgICAgICAgICBpZihjdi5jb25kaXRpb24gPT0gImRlZmF1bHQiIHx8IGFza2VyLmRpc3Bvc2UoY3Yuc2V0SWYsIGNvbmRpdGlvbnMpKXsNCiAgICAJCQkJaWYgKGN2LmlucHV0bGluaz09InF1ZXN0aW9uIil7DQogICAgCQkJCQlhbnN3ZXIgPSBjb25kaXRpb25zW2N2LmxpbmtWYWx1ZV07DQogICAgCQkJCX1lbHNlew0KICAgIAkJCQkJYW5zd2VyID0gY3YudmFsdWU7DQogICAgCQkJCX0NCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIHJldHVybiBhbnN3ZXI7DQogICAgICAgIH0NCg0KICAgICAgICBhc2tlci5zaW1wbGVGaWx0ZXIgPSBmdW5jdGlvbihvYmplY3QsIGNvbmRpdGlvbnMsIHRhcmdldCl7DQogICAgICAgICAgb2JqZWN0Lm1hcChmdW5jdGlvbihpdGVtKXsNCiAgICAgICAgICAgIGlmKGFza2VyLmRpc3Bvc2UoaXRlbS5zaG93SWYsIGNvbmRpdGlvbnMpKXsNCiAgICAgICAgICAgICAgdGFyZ2V0LnB1c2goaXRlbS5jb250ZW50KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgYXNrZXIuYXNzZW1ibGUgPSBmdW5jdGlvbihsaWJyYXJ5LCBhbnN3ZXJzKXsNCiAgICAgICAgYXNrZXIudm0ubGliID0gYXNrZXIuYnVpbGRBbnN3ZXJzKGxpYnJhcnksIGFuc3dlcnMpDQogIAkJICBtLm1vdW50KGRvY3VtZW50LmJvZHksIHBhY2tldCk7DQogIAkJCWFza2VyLmV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdwYWNrZXQnLCB7J2RldGFpbCc6IGFza2VyLnZtLmxpYn0pOw0KICAJCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwYWNrZXQnLCBmdW5jdGlvbihlKXtwYWNrZXRIYW5kbGVyKGUpfSwgZmFsc2UpOw0KICAJCSAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChhc2tlci5ldmVudCk7DQogICAgICAgIH0NCg0KDQogICAgICAgIGFza2VyLkludGVydmlldyA9ICB2aWV3TW9kZWxNYXAoew0KICAgICAgICAgIGFuc3dlcmVkOiBtLnByb3AoZmFsc2UpLA0KICAgICAgICAgIGVycm9yOiBtLnByb3AoIiIpLA0KICAgICAgICAgIGNob2ljZUNvdW50OiBtLnByb3AoMCkNCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy90aGlzIGhlbHBlciBjb3VsZCBiZSBpbXByb3ZlZA0KICAgICAgICBhc2tlci5BbnN3ZXIgPSB2aWV3TW9kZWxNYXAoew0KICAgICAgICAgIGNob3NlbjogbS5wcm9wKGZhbHNlKSwNCiAgICAgICAgICB2YWx1ZTogbS5wcm9wKCIiKQ0KICAgICAgICB9KTsNCiAgICAgICAgLy9JJ20gbm90IHN1cmUgaWYgdGhpcyBpcyBvcHRpbWFsLCBzaW5jZSBpdCByZWJ1aWxkcyB0aGUgY29uZGl0aW9uIHNldCBhZnRlciBlYWNoIHF1ZXN0aW9uLg0KICAgICAgICBhc2tlci5idWlsdENvbmRpdGlvbnMgPSBmdW5jdGlvbihxdWVzdGlvbnMpew0KICAgICAgICAgIHZhciBjb25kaXRpb25zQnVpbGRlciA9IHt9Ow0KICAgICAgICAgIHF1ZXN0aW9ucy5tYXAoZnVuY3Rpb24ocXVlc3Rpb24pew0KICAgICAgICAgICAgY29uZGl0aW9uc0J1aWxkZXJbcXVlc3Rpb24uaWQudG9TdHJpbmcoKSsiLmFuc3dlcmVkIl0gPSBhc2tlci5JbnRlcnZpZXcocXVlc3Rpb24pLmFuc3dlcmVkKCkudG9TdHJpbmcoKQ0KICAgICAgICAgICAgY29uZGl0aW9uc0J1aWxkZXIgPSBhc2tlci5hZGRDb25kaXRpb25zRnJvbVtxdWVzdGlvbi50eXBlXShxdWVzdGlvbiwgY29uZGl0aW9uc0J1aWxkZXIpDQogICAgICAgICAgfSk7DQogICAgICAgICAgcmV0dXJuIGNvbmRpdGlvbnNCdWlsZGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgYXNrZXIuYWRkQ29uZGl0aW9uc0Zyb20gPSB7fQ0KICAgICAgICBhc2tlci5hZGRDb25kaXRpb25zRnJvbVsiY2hvaWNlcyJdID0gZnVuY3Rpb24ocXVlc3Rpb24sIGNvbmRpdGlvbnNCdWlsZGVyKXsNCiAgICAgICAgICBxdWVzdGlvbi5jaG9pY2VzLm1hcChmdW5jdGlvbihjaG9pY2Upew0KICAgICAgICAgICAgY29uZGl0aW9uc0J1aWxkZXJbY2hvaWNlLmlkLnRvU3RyaW5nKCldID0gYXNrZXIuQW5zd2VyKFtxdWVzdGlvbi5pZCwgY2hvaWNlLmlkXSkuY2hvc2VuKCkudG9TdHJpbmcoKQ0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHJldHVybiBjb25kaXRpb25zQnVpbGRlcg0KICAgICAgICB9DQogICAgICAgIGFza2VyLmFkZENvbmRpdGlvbnNGcm9tWyJmaWVsZHMiXSA9IGZ1bmN0aW9uKHF1ZXN0aW9uLCBjb25kaXRpb25zQnVpbGRlcil7DQogICAgICAgICAgcXVlc3Rpb24uZmllbGRzLm1hcChmdW5jdGlvbihmaWVsZCl7DQogICAgICAgICAgICBjb25kaXRpb25zQnVpbGRlcltmaWVsZC5pZC50b1N0cmluZygpXSA9IGFza2VyLkFuc3dlcihbcXVlc3Rpb24uaWQsIGZpZWxkLmlkXSkudmFsdWUoKS50b1N0cmluZygpDQogICAgICAgICAgfSk7DQogICAgICAgICAgcmV0dXJuIGNvbmRpdGlvbnNCdWlsZGVyDQogICAgICAgIH0NCg0KICAgICAgICBhc2tlci52bSA9IHsNCiAgICAgICAgICBpbml0OiBmdW5jdGlvbigpew0KICAgICAgICAgICAgYXNrZXIudm0udW5hbnN3ZXJlZFF1ZXN0aW9ucyA9IGFza2VyLnF1ZXN0aW9uczsNCiAgICAgICAgICAgIGFza2VyLnZtLnF1ZXN0aW9uSGlzdG9yeSA9IFtdOw0KICAgICAgICAgICAgYXNrZXIudm0uYW5zd2VyT2JqZWN0ID0ge307DQogICAgICAgICAgICBhc2tlci52bS5saWI9e307DQogICAgICAgICAgICBhc2tlci52bS5zdWJtaXRRdWVzdGlvbiA9IGZ1bmN0aW9uKHF1ZXN0aW9uKXsNCiAgICAgICAgICAgICAgYXNrZXIuSW50ZXJ2aWV3KHF1ZXN0aW9uKS5hbnN3ZXJlZCgidHJ1ZSIpDQogICAgICAgICAgICAgIGFza2VyLnZtLnF1ZXN0aW9uSGlzdG9yeS5wdXNoKHF1ZXN0aW9uKQ0KICAgICAgICAgICAgICBhc2tlci52bS51bmFuc3dlcmVkUXVlc3Rpb25zLnNwbGljZShhc2tlci52bS51bmFuc3dlcmVkUXVlc3Rpb25zLmluZGV4T2YocXVlc3Rpb24pLCAxKTsNCiAgICAgICAgICAgICAgYXNrZXIudm0ubmV4dFF1ZXN0aW9uKCk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGFza2VyLnZtLmlzTWF4ID0gZnVuY3Rpb24ocXVlc3Rpb24pew0KICAgICAgICAgICAgICBpZiAocXVlc3Rpb24ubWF4QW5zd2Vycykgew0KICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IDA7DQogICAgICAgICAgICAgICAgcXVlc3Rpb24uY2hvaWNlcy5tYXAoZnVuY3Rpb24oY2hvaWNlKXsNCiAgICAgICAgICAgICAgICAgIGlmIChhc2tlci5BbnN3ZXIoW3F1ZXN0aW9uLmlkLCBjaG9pY2UuaWRdKS5jaG9zZW4oKT09PXRydWUpe3NlbGVjdGVkKyt9DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWQgPj0gcXVlc3Rpb24ubWF4QW5zd2VycyA/IHRydWUgOiBmYWxzZQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBhc2tlci52bS5uZXh0UXVlc3Rpb24gPSBmdW5jdGlvbigpew0KICAgICAgICAgICAgICBmb3IgKGNvdW50PTA7IGNvdW50IDw9IGFza2VyLnZtLnVuYW5zd2VyZWRRdWVzdGlvbnMubGVuZ3RoOyBjb3VudCsrKXsNCiAgICAgICAgICAgICAgICBxdWVzdGlvbiA9IGFza2VyLnZtLnVuYW5zd2VyZWRRdWVzdGlvbnNbY291bnRdOw0KICAgICAgICAgICAgICAgIGlmIChxdWVzdGlvbil7DQogICAgICAgICAgICAgICAgICBpZiAoYXNrZXIuZGlzcG9zZShxdWVzdGlvbi5zaG93SWYsIGFza2VyLmJ1aWx0Q29uZGl0aW9ucyhhc2tlci52bS5xdWVzdGlvbkhpc3RvcnkpKT09PXRydWUpe2Fza2VyLnZtLmN1cnJlbnRRdWVzdGlvbiA9IHF1ZXN0aW9uOyBicmVhazt9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2V7DQogICAgICAgICAgICAgICAgICBhc2tlci52bS5hbnN3ZXJPYmplY3QgPSBhc2tlci5idWlsdENvbmRpdGlvbnMoYXNrZXIudm0ucXVlc3Rpb25IaXN0b3J5KTsNCiAgICAgICAgICAgICAgICAgIGFza2VyLmFzc2VtYmxlKGFza2VyLmxpYnJhcnksIGFza2VyLnZtLmFuc3dlck9iamVjdCkgLy9yb3V0ZSB0byBhbnN3ZXJzIHRlbXBsYXRlLg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgYXNrZXIudm0ubmV4dFF1ZXN0aW9uKCk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgYXNrZXIuUXVlc3Rpb25WaWV3ID0gew0KICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCl7DQogICAgICAgICAgICBhc2tlci52bS5pbml0KCk7DQogICAgICAgICAgICByZXR1cm4gYXNrZXIudm0uY3VycmVudFF1ZXN0aW9uDQogICAgICAgICAgfSwNCiAgICAgICAgICB2aWV3OiBmdW5jdGlvbihjdHJsLCBhcmdzKXsNCiAgICAgICAgICAgICAgdmFyIGl2bSA9IGFza2VyLkludGVydmlldyhhc2tlci52bS5jdXJyZW50UXVlc3Rpb24uaWQpDQogICAgICAgICAgICAgIHJldHVybiBtKCJkaXYiLHtjbGFzczoiY29udGFpbmVyIn0sIFsNCiAgICAgICAgICAgICAgICBtKCJoMiIsIGFza2VyLnZtLmN1cnJlbnRRdWVzdGlvbi50ZXh0KSwNCiAgICAgICAgICAgICAgICBtLmNvbXBvbmVudChhc2tlci5BbnN3ZXJSZW5kZXJbYXNrZXIudm0uY3VycmVudFF1ZXN0aW9uLnR5cGVdLCBhcmdzKSwNCiAgICAgICAgICAgICAgbSgiYnV0dG9uIiwge29uY2xpY2s6ZnVuY3Rpb24oKXthc2tlci52bS5zdWJtaXRRdWVzdGlvbihhc2tlci52bS5jdXJyZW50UXVlc3Rpb24pfX0sICJOZXh0IFF1ZXN0aW9uIikNCiAgICAgICAgICAgIF0pDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgYXNrZXIuQW5zd2VyUmVuZGVyID0ge30NCiAgICAgICAgICBhc2tlci5BbnN3ZXJSZW5kZXJbImNob2ljZXMiXSA9IHsNCiAgICAgICAgICAgIHZpZXc6IGZ1bmN0aW9uKGFyZ3Mpew0KICAgICAgICAgICAgcmV0dXJuICBtKCJmb3JtIixbDQogICAgICAgICAgICAgICAgYXNrZXIudm0uY3VycmVudFF1ZXN0aW9uLmNob2ljZXMubWFwKGZ1bmN0aW9uKGNob2ljZSl7DQogICAgICAgICAgICAgICAgICAgdmFyIGF2bSA9IGFza2VyLkFuc3dlcihbYXNrZXIudm0uY3VycmVudFF1ZXN0aW9uLmlkLCBjaG9pY2UuaWRdKQ0KICAgICAgICAgICAgICAgICAgIHJldHVybiBtKCJsYWJlbCIsIHtjbGFzczoib3B0aW9uIisgKGF2bS5jaG9zZW4oKSA/ICIgc2VsZWN0ZWQiIDogIiIpICsgKCghYXZtLmNob3NlbigpICYmIGFza2VyLnZtLmlzTWF4KGFza2VyLnZtLmN1cnJlbnRRdWVzdGlvbikpID8gIiBkaXNhYmxlZCIgOiAiIil9LCBbDQogICAgICAgICAgICAgICAgICAgbSgiaW5wdXRbdHlwZT1jaGVja2JveF0iLCB7DQogICAgICAgICAgICAgICAgICAgICBvbmNoYW5nZTogbS53aXRoQXR0cigiY2hlY2tlZCIsIGF2bS5jaG9zZW4pLA0KICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogYXZtLmNob3NlbigpIHx8IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6ICFhdm0uY2hvc2VuKCkgJiYgYXNrZXIudm0uaXNNYXgoYXNrZXIudm0uY3VycmVudFF1ZXN0aW9uKQ0KICAgICAgICAgICAgICAgICAgICAgLy90b2RvOiBtYXhBbnN3ZXJzICsgZGlzYWJsZWQNCiAgICAgICAgICAgICAgICAgICB9KSwNCiAgICAgICAgICAgICAgICAgICBtKCJzcGFuIiwge2NsYXNzOiAibGFiZWwtYm9keSJ9LCBjaG9pY2UudGV4dCkNCiAgICAgICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIF0pDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgYXNrZXIuQW5zd2VyUmVuZGVyWyJmaWVsZHMiXSA9IHsNCiAgICAgICAgICAgIHZpZXc6IGZ1bmN0aW9uKGFyZ3Mpew0KICAgICAgICAgICAgICByZXR1cm4gbSgiZm9ybSIsIFsNCiAgICAgICAgICAgICAgICBhc2tlci52bS5jdXJyZW50UXVlc3Rpb24uZmllbGRzLm1hcChmdW5jdGlvbihmaWVsZCl7DQogICAgICAgICAgICAgICAgICB2YXIgYXZtID0gYXNrZXIuQW5zd2VyKFthc2tlci52bS5jdXJyZW50UXVlc3Rpb24uaWQsIGZpZWxkLmlkXSkNCiAgICAgICAgICAgICAgICAgIHJldHVybiBtKCJsYWJlbCIsIFsNCiAgICAgICAgICAgICAgICAgIG0oImlucHV0Iiwgew0KICAgICAgICAgICAgICAgICAgICBvbmNoYW5nZTogbS53aXRoQXR0cigidmFsdWUiLCBhdm0udmFsdWUpLA0KICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXZtLnZhbHVlKCksDQogICAgICAgICAgICAgICAgICB9KSwNCiAgICAgICAgICAgICAgICAgIG0oInNwYW4iLCB7Y2xhc3M6ICJsYWJlbC1ib2R5In0sIGZpZWxkLmxhYmVsKQ0KICAgICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KDQoNCiAgICAgICAgICBhbnN3ZXJTdW1tYXJ5ID0gew0KICAgICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oKXsNCiAgICAgICAgICAgICAgcmV0dXJuIGFza2VyLnZtLnF1ZXN0aW9uSGlzdG9yeQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHZpZXc6IGZ1bmN0aW9uKGN0cmwsIGFyZ3Mpew0KICAgICAgICAgICAgICByZXR1cm4gbSgiLmNvbnRhaW5lciIsIHtjbGFzczonYW5zd2VyaGlzdG9yeSd9LCBbDQogICAgICAgICAgICAgICAgbSgiaDMiLCAiWW91ciBhbnN3ZXJzIiksDQogICAgICAgICAgICAgICAgY3RybC5tYXAoZnVuY3Rpb24ocXVlc3Rpb24pew0KICAgICAgICAgICAgICAgIHJldHVybiBtKCJkaXYiLCBbDQogICAgICAgICAgICAgICAgICBtKCJoNCIsIHF1ZXN0aW9uLnRleHQpLA0KICAgICAgICAgICAgICAgICAgbSgidWwiLFsNCiAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb24uY2hvaWNlcy5tYXAoZnVuY3Rpb24oY2hvaWNlKXsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgYXZtID0gYXNrZXIuQW5zd2VyKFtxdWVzdGlvbi5pZCwgY2hvaWNlLmlkXSkNCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbSgibGkiLCB7Y2xhc3M6IGF2bS5jaG9zZW4oKSA/ICJjaG9zZW4iIDogIm5vdC1jaG9zZW4ifSwgY2hvaWNlLnRleHQpDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgICAgIF0pDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9Ow0KDQogICAgICAgICAgcGFja2V0ID0gew0KICAgICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oYXJncyl7DQogICAgICAgICAgICAgIHJldHVybiB7bGliOmFza2VyLnZtLmxpYn0NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB2aWV3OiBmdW5jdGlvbihjdHJsLCBhcmdzKXsNCiAgICAgICAgICAgICAgcmV0dXJu"

//encoded version of engine.js
var rulesengine = "ICAvKlJ1bGVzIEVuZ2luZSAvIENocmlzanBvd2Vycy9idXNpbmVzcy1ydWxlcyovDQovKg0KQ29weXJpZ2h0IDIwMTMgQ2hyaXMgUG93ZXJzDQpodHRwOi8vY2hyaXNqcG93ZXJzLmNvbQ0KDQpQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcNCmEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZQ0KIlNvZnR3YXJlIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZw0Kd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLA0KZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvDQpwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8NCnRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoNCg0KVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUNCmluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLg0KDQpUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwNCkVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRg0KTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQNCk5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUNCkxJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04NCk9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTg0KV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuKi8NCiAgdmFyIGdsb2JhbCA9IHRoaXM7DQoNCiAgKGZ1bmN0aW9uKCkgew0KICAgIHZhciBzdGFuZGFyZE9wZXJhdG9ycyA9IHsNCiAgICAgIHByZXNlbnQ6IGZ1bmN0aW9uKGFjdHVhbCwgdGFyZ2V0KSB7DQogICAgICAgIHJldHVybiAhIWFjdHVhbDsNCiAgICAgIH0sDQogICAgICBibGFuazogZnVuY3Rpb24oYWN0dWFsLCB0YXJnZXQpIHsNCiAgICAgICAgcmV0dXJuICFhY3R1YWw7DQogICAgICB9LA0KICAgICAgZXF1YWxUbzogZnVuY3Rpb24oYWN0dWFsLCB0YXJnZXQpIHsNCiAgICAgICAgcmV0dXJuICIiICsgYWN0dWFsID09PSAiIiArIHRhcmdldDsNCiAgICAgIH0sDQogICAgICBub3RFcXVhbFRvOiBmdW5jdGlvbihhY3R1YWwsIHRhcmdldCkgew0KICAgICAgICByZXR1cm4gIiIgKyBhY3R1YWwgIT09ICIiICsgdGFyZ2V0Ow0KICAgICAgfSwNCiAgICAgIGdyZWF0ZXJUaGFuOiBmdW5jdGlvbihhY3R1YWwsIHRhcmdldCkgew0KICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChhY3R1YWwsIDEwKSA+IHBhcnNlRmxvYXQodGFyZ2V0LCAxMCk7DQogICAgICB9LA0KICAgICAgZ3JlYXRlclRoYW5FcXVhbDogZnVuY3Rpb24oYWN0dWFsLCB0YXJnZXQpIHsNCiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoYWN0dWFsLCAxMCkgPj0gcGFyc2VGbG9hdCh0YXJnZXQsIDEwKTsNCiAgICAgIH0sDQogICAgICBsZXNzVGhhbjogZnVuY3Rpb24oYWN0dWFsLCB0YXJnZXQpIHsNCiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoYWN0dWFsLCAxMCkgPCBwYXJzZUZsb2F0KHRhcmdldCwgMTApOw0KICAgICAgfSwNCiAgICAgIGxlc3NUaGFuRXF1YWw6IGZ1bmN0aW9uKGFjdHVhbCwgdGFyZ2V0KSB7DQogICAgICAgIHJldHVybiBwYXJzZUZsb2F0KGFjdHVhbCwgMTApIDw9IHBhcnNlRmxvYXQodGFyZ2V0LCAxMCk7DQogICAgICB9LA0KICAgICAgaW5jbHVkZXM6IGZ1bmN0aW9uKGFjdHVhbCwgdGFyZ2V0KSB7DQogICAgICAgIHJldHVybiAoIiIgKyBhY3R1YWwpLmluZGV4T2YoIiIgKyB0YXJnZXQpID4gLTE7DQogICAgICB9LA0KICAgICAgbWF0Y2hlc1JlZ2V4OiBmdW5jdGlvbihhY3R1YWwsIHRhcmdldCkgew0KICAgICAgICB2YXIgciA9IHRhcmdldC5yZXBsYWNlKC9eXC98XC8kL2csICIiKTsNCiAgICAgICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cChyKTsNCiAgICAgICAgcmV0dXJuIHJlZ2V4LnRlc3QoIiIgKyBhY3R1YWwpOw0KICAgICAgfQ0KICAgIH07DQoNCiAgICB2YXIgUnVsZUVuZ2luZSA9IGdsb2JhbC5SdWxlRW5naW5lID0gZnVuY3Rpb24gUnVsZUVuZ2luZShydWxlKSB7DQogICAgICBydWxlID0gcnVsZSB8fCB7fTsNCiAgICAgIHRoaXMub3BlcmF0b3JzID0ge307DQogICAgICB0aGlzLmFjdGlvbnMgPSBydWxlLmFjdGlvbnMgfHwgW107DQogICAgICB0aGlzLmNvbmRpdGlvbnMgPSBydWxlLmNvbmRpdGlvbnMgfHwge2FsbDogW119Ow0KICAgICAgdGhpcy5hZGRPcGVyYXRvcnMoc3RhbmRhcmRPcGVyYXRvcnMpOw0KICAgIH0NCg0KICAgIFJ1bGVFbmdpbmUucHJvdG90eXBlID0gew0KICAgICAgcnVuOiBmdW5jdGlvbihjb25kaXRpb25zQWRhcHRlciwgYWN0aW9uc0FkYXB0ZXIsIGNiKSB7DQogICAgICAgIHZhciBvdXQsIGVycm9yLCBfdGhpcyA9IHRoaXM7DQogICAgICAgIHRoaXMubWF0Y2hlcyhjb25kaXRpb25zQWRhcHRlciwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHsNCiAgICAgICAgICBvdXQgPSByZXN1bHQ7DQogICAgICAgICAgZXJyb3IgPSBlcnI7DQogICAgICAgICAgaWYgKHJlc3VsdCAmJiAhZXJyKSBfdGhpcy5ydW5BY3Rpb25zKGFjdGlvbnNBZGFwdGVyKTsNCiAgICAgICAgICBpZiAoY2IpIGNiKGVyciwgcmVzdWx0KTsNCiAgICAgICAgfSk7DQogICAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7DQogICAgICAgIHJldHVybiBvdXQ7DQogICAgICB9LA0KDQogICAgICBtYXRjaGVzOiBmdW5jdGlvbihjb25kaXRpb25zQWRhcHRlciwgY2IpIHsNCiAgICAgICAgdmFyIG91dCwgZXJyOw0KICAgICAgICBoYW5kbGVOb2RlKHRoaXMuY29uZGl0aW9ucywgY29uZGl0aW9uc0FkYXB0ZXIsIHRoaXMsIGZ1bmN0aW9uKGUsIHJlc3VsdCkgew0KICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICBlcnIgPSBlOw0KICAgICAgICAgICAgY29uc29sZS5sb2coIkVSUiIsIGUubWVzc2FnZSwgZS5zdGFjayk7DQogICAgICAgICAgfQ0KICAgICAgICAgIG91dCA9IHJlc3VsdDsNCiAgICAgICAgICBpZiAoY2IpIGNiKGUsIHJlc3VsdCk7DQogICAgICAgIH0pOw0KICAgICAgICBpZiAoZXJyKSB0aHJvdyBlcnI7DQogICAgICAgIGlmICghY2IpIHJldHVybiBvdXQ7DQogICAgICB9LA0KDQogICAgICBvcGVyYXRvcjogZnVuY3Rpb24obmFtZSkgew0KICAgICAgICByZXR1cm4gdGhpcy5vcGVyYXRvcnNbbmFtZV07DQogICAgICB9LA0KDQogICAgICBhZGRPcGVyYXRvcnM6IGZ1bmN0aW9uKG5ld09wZXJhdG9ycykgew0KICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgICBmb3IodmFyIGtleSBpbiBuZXdPcGVyYXRvcnMpIHsNCiAgICAgICAgICBpZihuZXdPcGVyYXRvcnMuaGFzT3duUHJvcGVydHkoa2V5KSkgew0KICAgICAgICAgICAgKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICB2YXIgb3AgPSBuZXdPcGVyYXRvcnNba2V5XTsNCiAgICAgICAgICAgICAgLy8gc3luY2hyb25vdXMgc3R5bGUgb3BlcmF0b3IsIG5lZWRzIHRvIGJlIHdyYXBwZWQNCiAgICAgICAgICAgICAgaWYgKG9wLmxlbmd0aCA9PSAyKSB7DQogICAgICAgICAgICAgICAgX3RoaXMub3BlcmF0b3JzW2tleV0gPSBmdW5jdGlvbihhY3R1YWwsIHRhcmdldCwgY2IpIHsNCiAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBvcChhY3R1YWwsIHRhcmdldCk7DQogICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIHJlc3VsdCk7DQogICAgICAgICAgICAgICAgICB9IGNhdGNoKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgY2IoZSk7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAvLyBhc3luY2hyb25vdXMgc3R5bGUsIG5vIHdyYXBwaW5nIG5lZWRlZA0KICAgICAgICAgICAgICBlbHNlIGlmIChvcC5sZW5ndGggPT0gMykgew0KICAgICAgICAgICAgICAgIF90aGlzLm9wZXJhdG9yc1trZXldID0gb3A7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgdGhyb3cgIk9wZXJhdG9ycyBzaG91bGQgaGF2ZSBhbiBhcml0eSBvZiAyIG9yIDM7ICIgKyBrZXkgKyAiIGhhcyAiICsgb3AubGVuZ3RoOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KSgpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSwNCg0KICAgICAgcnVuQWN0aW9uczogZnVuY3Rpb24oYWN0aW9uc0FkYXB0ZXIpIHsNCiAgICAgICAgZm9yKHZhciBpPTA7IGkgPCB0aGlzLmFjdGlvbnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICB2YXIgYWN0aW9uRGF0YSA9IHRoaXMuYWN0aW9uc1tpXTsNCiAgICAgICAgICB2YXIgYWN0aW9uTmFtZSA9IGFjdGlvbkRhdGEudmFsdWU7DQogICAgICAgICAgdmFyIGFjdGlvbkZ1bmN0aW9uID0gYWN0aW9uc0FkYXB0ZXJbYWN0aW9uTmFtZV0NCiAgICAgICAgICBpZihhY3Rpb25GdW5jdGlvbikgeyBhY3Rpb25GdW5jdGlvbihuZXcgRmluZGVyKGFjdGlvbkRhdGEpKTsgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfTsNCg0KICAgIGZ1bmN0aW9uIEZpbmRlcihkYXRhKSB7DQogICAgICB0aGlzLmRhdGEgPSBkYXRhOw0KICAgIH0NCg0KICAgIEZpbmRlci5wcm90b3R5cGUgPSB7DQogICAgICBmaW5kOiBmdW5jdGlvbigpIHsNCiAgICAgICAgdmFyIGN1cnJlbnROb2RlID0gdGhpcy5kYXRhOw0KICAgICAgICBmb3IodmFyIGk9MDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIHZhciBuYW1lID0gYXJndW1lbnRzW2ldOw0KICAgICAgICAgIGN1cnJlbnROb2RlID0gZmluZEJ5TmFtZShuYW1lLCBjdXJyZW50Tm9kZSk7DQogICAgICAgICAgaWYoIWN1cnJlbnROb2RlKSB7IHJldHVybiBudWxsOyB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGN1cnJlbnROb2RlLnZhbHVlOw0KICAgICAgfQ0KICAgIH07DQoNCiAgICBmdW5jdGlvbiBmaW5kQnlOYW1lKG5hbWUsIG5vZGUpIHsNCiAgICAgIHZhciBmaWVsZHMgPSBub2RlLmZpZWxkcyB8fCBbXTsNCiAgICAgIGZvcih2YXIgaT0wOyBpIDwgZmllbGRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIHZhciBmaWVsZCA9IGZpZWxkc1tpXTsNCiAgICAgICAgaWYoZmllbGQubmFtZSA9PT0gbmFtZSkgeyByZXR1cm4gZmllbGQ7IH0NCiAgICAgIH0NCiAgICAgIHJldHVybiBudWxsOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGhhbmRsZU5vZGUobm9kZSwgb2JqLCBlbmdpbmUsIGNiKSB7DQogICAgICBpZihub2RlLmFsbCB8fCBub2RlLmFueSB8fCBub2RlLm5vbmUpIHsNCiAgICAgICAgaGFuZGxlQ29uZGl0aW9uYWxOb2RlKG5vZGUsIG9iaiwgZW5naW5lLCBjYik7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBoYW5kbGVSdWxlTm9kZShub2RlLCBvYmosIGVuZ2luZSwgY2IpOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGhhbmRsZUNvbmRpdGlvbmFsTm9kZShub2RlLCBvYmosIGVuZ2luZSwgY2IpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIHZhciBpc0FsbCA9ICEhbm9kZS5hbGw7DQogICAgICAgIHZhciBpc0FueSA9ICEhbm9kZS5hbnk7DQogICAgICAgIHZhciBpc05vbmUgPSAhIW5vZGUubm9uZTsNCiAgICAgICAgdmFyIG5vZGVzID0gaXNBbGwgPyBub2RlLmFsbCA6IG5vZGUuYW55Ow0KICAgICAgICBpZiAoaXNOb25lKSB7IG5vZGVzID0gbm9kZS5ub25lIH0NCiAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCA9PSAwKSB7DQogICAgICAgICAgcmV0dXJuIGNiKG51bGwsIHRydWUpOw0KICAgICAgICB9DQogICAgICAgIHZhciBjdXJyZW50Tm9kZSwgaSA9IDA7DQogICAgICAgIHZhciBuZXh0ID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGN1cnJlbnROb2RlID0gbm9kZXNbaV07DQogICAgICAgICAgICBpKys7DQogICAgICAgICAgICBpZiAoY3VycmVudE5vZGUpIHsNCiAgICAgICAgICAgICAgaGFuZGxlTm9kZShjdXJyZW50Tm9kZSwgb2JqLCBlbmdpbmUsIGRvbmUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgZ29uZSB0aHJvdWdoIGFsbCBvZiB0aGUgbm9kZXMgYW5kIGdvdHRlbg0KICAgICAgICAgICAgICAvLyBoZXJlLCBlaXRoZXIgdGhleSBoYXZlIGFsbCBiZWVuIHRydWUgKHN1Y2Nlc3MgZm9yIGBhbGxgKQ0KICAgICAgICAgICAgICAvLyBvciBhbGwgZmFsc2UgKGZhaWx1cmUgZm9yIGBhbnlgKTsNCiAgICAgICAgICAgICAgdmFyIHIgPSBpc05vbmUgPyB0cnVlIDogaXNBbGw7DQogICAgICAgICAgICAgIGNiKG51bGwsIHIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gY2F0Y2goZSkgew0KICAgICAgICAgICAgY2IoZSk7DQogICAgICAgICAgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIHZhciBkb25lID0gZnVuY3Rpb24oZXJyLCByZXN1bHQpIHsNCiAgICAgICAgICBpZiAoZXJyKSByZXR1cm4gY2IoZXJyKTsNCiAgICAgICAgICBpZiAoaXNBbGwgJiYgIXJlc3VsdCkgcmV0dXJuIGNiKG51bGwsIGZhbHNlKTsNCiAgICAgICAgICBpZiAoaXNBbnkgJiYgISFyZXN1bHQpIHJldHVybiBjYihudWxsLCB0cnVlKTsNCiAgICAgICAgICBpZiAoaXNOb25lICYmICEhcmVzdWx0KSByZXR1cm4gY2IobnVsbCwgZmFsc2UpOw0KICAgICAgICAgIG5leHQoKTsNCiAgICAgICAgfQ0KICAgICAgICBuZXh0KCk7DQogICAgICB9IGNhdGNoKGUpIHsNCiAgICAgICAgY2IoZSk7DQogICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gaGFuZGxlUnVsZU5vZGUobm9kZSwgb2JqLCBlbmdpbmUsIGNiKSB7DQogICAgICB0cnkgew0KICAgICAgICB2YXIgdmFsdWUgPSBvYmpbbm9kZS5uYW1lXTsNCiAgICAgICAgaWYgKHZhbHVlICYmIHZhbHVlLmNhbGwpIHsNCiAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoID09PSAxKSB7DQogICAgICAgICAgICByZXR1cm4gdmFsdWUoZnVuY3Rpb24ocmVzdWx0KSB7DQogICAgICAgICAgICAgIGNvbXBhcmVWYWx1ZXMocmVzdWx0LCBub2RlLm9wZXJhdG9yLCBub2RlLnZhbHVlLCBlbmdpbmUsIGNiKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUoKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBjb21wYXJlVmFsdWVzKHZhbHVlLCBub2RlLm9wZXJhdG9yLCBub2RlLnZhbHVlLCBlbmdpbmUsIGNiKTsNCiAgICAgIH0gY2F0Y2goZSkgew0KICAgICAgICBjYihlKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjb21wYXJlVmFsdWVzKGFjdHVhbCwgb3BlcmF0b3IsIHZhbHVlLCBlbmdpbmUsIGNiKSB7DQogICAgICB0cnkgew0KICAgICAgICB2YXIgb3BlcmF0b3JGdW5jdGlvbiA9IGVuZ2luZS5vcGVyYXRvcihvcGVyYXRvcik7DQogICAgICAgIGlmICghb3BlcmF0b3JGdW5jdGlvbikgdGhyb3cgIk1pc3NpbmcgIiArIG9wZXJhdG9yICsgIiBvcGVyYXRvciI7DQogICAgICAgIG9wZXJhdG9yRnVuY3Rpb24oYWN0dWFsLCB2YWx1ZSwgY2IpOw0KICAgICAgfSBjYXRjaChlKSB7DQogICAgICAgIGNiKGUpOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIGlmICh0eXBlb2YgbW9kdWxlICE9PSAidW5kZWZpbmVkIikgew0KICAgICAgbW9kdWxlLmV4cG9ydHMgPSBSdWxlRW5naW5lOw0KICAgICAgZGVsZXRlIGdsb2JhbC5SdWxlRW5naW5lOw0KICAgIH0NCiAgfSkoKTsNCg=="